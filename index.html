<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title></title>
  <link rel="stylesheet" href="https://js.arcgis.com/4.4/esri/css/main.css">
  <script src="https://js.arcgis.com/4.4/"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="shstyle.css">
  <link href="lightbox/css/lightbox.css" rel="stylesheet">

  <script>
  require([
  "esri/Map",
  "esri/WebMap",
  "esri/views/MapView",
  "esri/layers/FeatureLayer",
  "esri/symbols/SimpleFillSymbol",
  "esri/symbols/SimpleLineSymbol",
  "esri/Color",
  "esri/Graphic",
  "esri/PopupTemplate",
  "esri/core/watchUtils",
  "esri/widgets/Popup",
  "esri/geometry/geometryEngine",
  "esri/geometry/Point",
  "esri/renderers/SimpleRenderer",
  "dojo/dom",
  "dojo/domReady!",
  "dojo/ready"

  ],

  function(Map, WebMap, MapView, FeatureLayer, SimpleFillSymbol, SimpleLineSymbol, Color, Graphic, PopupTemplate, watchUtils, Popup, geometryEngine, Point, SimpleRenderer, dom){

      var map = new WebMap({
        portalItem: { // autocasts as new PortalItem()
          id: "5838281353a74323864fcbe816ee0f0e"
        }
      })

      var view = new MapView({
        container: "viewDiv",  // Reference to the scene div created in step 5
        map: map,  // Reference to the map object created before the scene
        zoom: 16,  // Sets zoom level based on level of detail (LOD)
        center: [-75.1482, 39.94581]  // Sets center point of view using longitude,latitude
      });

      function isInArray(value, array) {
        return array.indexOf(value) > -1;
      }

      highfillSymbol = new SimpleFillSymbol({
     color: [255, 139, 0, 0],
     outline: { // autocasts as new SimpleLineSymbol()
       color: [255, 139, 0],
       width: 2
     }
   });



      highfillSymbol2 = new SimpleFillSymbol(SimpleFillSymbol.STYLE_NULL,
        new SimpleLineSymbol(
          SimpleLineSymbol.STYLE_SHORTDASHDOTDOT,
          new Color([255, 255, 255]),2), new Color([255, 255, 0, 0.25]));

      var polylineSymbol = {
      type: "simple-line",
      color: [226, 119, 40],
      width: 4
    };


    visibleSymbol = new SimpleFillSymbol({
      color: [0, 0, 0, 0],
      outline: { // autocasts as new SimpleLineSymbol()
        color: [56, 121, 226],
        width: 2
      }
    });

    invisibleSymbol = new SimpleFillSymbol({
      color: [0, 0, 0, 0],
      outline: { // autocasts as new SimpleLineSymbol()
        color: [0, 0, 0, 0],
        width: 2
      }
    });

      var layer;
      var graphic;
      var screenPoint;
      var graphic;
      var recordsList;
      var popupContent;
      var xval;
      var popupTemplate;
        var historicLayerIsVisible = true;

  //end get Graphics



      view.then(function() {

        function getGraphics(response) {
          var point = new Point(screenPoint);
          if (graphic && !response.results[0]) {
          layer.source.remove(graphic);
            return;
          }

          if(response.results[0] && response.results[0].graphic){
          //  console.log(response.results[0]);
            if (response.results[0].graphic.geometry.centroid.x == xval) {
              return;
            }

            if (response.results[0].graphic.geometry.centroid.x != xval) {
              layer.source.remove(graphic);
              graphic = response.results[0].graphic.clone();
              xval = (graphic.geometry.centroid.x);
            }

            if(response.results[0] && response.results[0].graphic){
            //  popupContent = response.results[0].graphic.attributes["PopupContent"];
              //var imgsrc = graphic.attributes["ImgSrc"];
              //var name = graphic.attributes["Name"];
            //  console.log(name);
              //graphic.setAttribute("PopupContent", imgsrc);
            //  console.log("image: " + graphic.attributes["PopupContent"]);
              graphic.symbol = highfillSymbol;
                layer.source.add(graphic);
                //console.log(transparentHistoricLayer.source.toArray()[89]);


              //console.log(layer.popupTemplate.title);

            }
          }
        }




        var allLayers = map.allLayers.toArray();
        //uncomment this to get a list of all the layer ids on the map
        for (var i = 0; i < allLayers.length; i++) {
         console.log(allLayers[i].id);
         //console.log(allLayers[i].visible);
        }



        layerID = "allFirstParcelsGeoOh_shapefile_6643";
        layerID2 = "Archive 26_shapefile_5898";


        //historicLayer = map.findLayerById(layerID);
        layer =  map.findLayerById(layerID);
        modernLayer = map.findLayerById(layerID2);
        //layer = historicLayer;

      //  console.log(transparentHistoricLayer.source.length);

        modernLayer.visible = false;
        renderer = new SimpleRenderer();
        renderer.symbol = visibleSymbol;
        layer.renderer = renderer;

        //alert("popup created");

        for (var i = 0; i < layer.fields.length; i++){
        //  console.log("field index " + i + " is " + layer.fields[i].name);
        }




        var checkboxes = document.getElementsByClassName("checkbox");
        for (i = 0; i < checkboxes.length; i++) {
          var layerName = checkboxes[i].value;
          checkboxes[i].addEventListener("click", makeClickCallback(layerName));

        }




      //alert(layer.visible);
        function makeClickCallback(layerName) {
          function callback(){
          for (var i = 0; i < allLayers.length; i++) {
           if (allLayers[i].id == layerName) {
          //   alert(layerName);
             if (layerName != layer.id) {
             allLayers[i].visible = !allLayers[i].visible;
           }
             if (historicLayerIsVisible == false) {
               //transparentHistoricLayer.visible = true;

               layer.renderer = renderer;
               if (graphic) {
                 layer.source.remove(graphic);

               }
               historicLayerIsVisible = true;
               return;
             }
             if(historicLayerIsVisible == true) {
              // alert("true");
               //layer.visible = false;
              // transparentHistoricLayer.visible = false;
              var renderer3 = new SimpleRenderer();
              renderer3.symbol = invisibleSymbol;
              layer.renderer = renderer3;
              historicLayerIsVisible = false;


             }
           }
          }

            //alert(checkedLayer.id);

          }
          return callback;
        }

      //  view.whenLayerView(layer).then(function(lview) {
         watchUtils.whenTrue(view, "stationary", function() {
        //  console.log("layer view updated");
        view.on("pointer-move", function(evt) {
            screenPoint = {
             x: evt.x,
             y: evt.y
           };

           view.hitTest(screenPoint)
             .then( function(response){
               if (historicLayerIsVisible == false) {
                 getGraphics(response);
               }
             });
         }); //end pointer move
       });
     //});

       var records = layer.source.toArray();
        var recordsList = [];
        for (var i = 0, len = records.length; i < len; i++) {
          recordsList.push(records[i]);
        }

        //put all the image field indexes in an array
        var imageFields = [];
        for (var i = 0; i < layer.fields.length; i++){
          var fieldName = layer.fields[i].name;
          var substring = "ImgSrc";
          if (fieldName.indexOf(substring) !== -1) {
            imageFields.push(i);
          }
        }



          createPopup(layer);
          popupTemplate = new PopupTemplate();
            //historicLayer.popupTemplate = popupTemplate;
          layer.popupTemplate = popupTemplate;
            popupTemplate.title = "{Name}";

            popupTemplate.content = "{PopupContent}";


        /*  var imageFields2 = [];
        for (var i = 0; i < layer2.fields.length; i++){
        var fieldName = layer2.fields[i].name;
        var substring = "ImgSrc";
        if (fieldName.indexOf(substring) !== -1) {
        imageFields2.push(i);
      }
    }*/

        var collapseDiv = document.getElementById("collapseButton");
        var narrativeVisible = true;
        collapseDiv.addEventListener('click', function() {
          var sidePanel = document.getElementById("sidebar");
          //  var socialMedia = document.getElementById("socialDiv");
          if (narrativeVisible == true){
            sidePanel.style.width = "2px";
            //    socialMedia.style.display = "none";
            document.getElementById("collapseButton").style.left = "0.5%";
            document.getElementById("collapse").textContent = "Show";
          //  document.getElementById("collapse").style.display = "block";
            //document.getElementById("viewDiv").style.width = "95%";
            //  document.getElementById("sliderDiv").style.left = "50%";

            narrativeVisible = false;
            return;
          }

          if (narrativeVisible == false) {
            sidePanel.style.width = "26%";
            //  socialMedia.style.display = "block";
            document.getElementById("collapseButton").style.left = "26%";
            document.getElementById("collapse").textContent = "Hide";
          //  document.getElementById("viewDiv").style.width = "73%";
            //document.getElementById("sliderDiv").style.left = "60%";
            narrativeVisible = true;
            return;
          }
        }); //end click


        //toggle layer visibility

      /*  document.getElementById("toggleLayers").addEventListener('click', function(){
          historicLayer.visible = !historicLayer.visible;
          modernLayer.visible = !modernLayer.visible;
          /*if (layer == layer1) {
          layer = layer2;
          return;
        }
        if (layer == layer2) {
        layer = layer1;
        return;
      }
    });*/


      //show all records when the showAll button is clicked
        var showAll = document.getElementById("showAll");
        showAll.addEventListener('click', function() {
          //reset the selector's value
          selector.selectedIndex = 0;
          document.getElementById("media_select").selectedIndex = 0;
          //clear currently displayed recordsList[i]s
          for (var i = records.length - 1; i > -1; i--) {
            layer.source.remove(records[i]);
          }
          //add all recordsList[i]s
          for (var i = 0; i < recordsList.length; i++){
            layer.source.add(recordsList[i]);
          }
        }); //end onclick


        var selector = document.getElementById("field_select");
        var selectorList = [];
        for (var i = 0, len = records.length; i < len; i++) {

          //alert(records[i].attributes["Re_Use_Typ"]);
          var number = records[i].attributes["Re_Use_Typ"];
          //alert(number);
          if (isInArray(number, selectorList) == false && number != " "){
            selectorList.push(number);
          }
        }
        sortedList = selectorList.sort();
        for (var i = 0; i < sortedList.length; i++) {
          var optionElement = document.createElement("option");
          optionElement.innerHTML = sortedList[i];
          selector.appendChild(optionElement);
        }

        selector.addEventListener('change', filterEquals);
        var mediaSelector = document.getElementById("media_select");
        mediaSelector.addEventListener('change', mediaFilter);

        function filterEquals() {
          //clear all layers
          for (var i = records.length - 1; i>-1; i--) {
            layer.source.remove(records[i]);
          }
          var reuseType = selector.value;
          //add all recordsList[i]s to the map that match the filter's value
          for (var i = 0; i < recordsList.length; i++) {
            if (recordsList[i].attributes["Re_Use_Typ"] == reuseType) {
              layer.source.add(recordsList[i]);
            }
          }
        } //end filter

        function mediaFilter() {
          var firstImageField = imageFields[0];
          var firstImageName = layer.fields[firstImageField].name;
          var mediaType = mediaSelector.value;
          if (mediaType == "photo") {
            for (var i = records.length - 1; i>-1; i--) {
              layer.source.remove(records[i]);
            }
            for (var i = 0; i < recordsList.length; i++) {
              if (recordsList[i].attributes[firstImageName].length > 1) {
                layer.source.add(recordsList[i]);
              }
            }
          }

          if (mediaType == "oralhist") {
            for (var i = records.length - 1; i>-1; i--) {
              layer.source.remove(records[i]);
            }
            for (var i = 0; i < recordsList.length; i++) {
              if (recordsList[i].attributes["Narrator"].length > 1) {
                layer.source.add(recordsList[i]);
              }
            }
          }

          if (mediaType == "oralhist") {
            for (var i = records.length - 1; i>-1; i--) {
              layer.source.remove(records[i]);
            }
            for (var i = 0; i < recordsList.length; i++) {
              //if (recordsList[i].attributes["OralHist"].length > 1) {
              if (recordsList[i].attributes["Narrator"].length > 1) {
                layer.source.add(recordsList[i]);
              }
            }
          }

          if (mediaType == "both") {
            for (var i = records.length - 1; i>-1; i--) {
              layer.source.remove(records[i]);
            }
            for (var i = 0; i < recordsList.length; i++) {
              //if (recordsList[i].attributes[firstImageName].length > 1 && recordsList[i].attributes["OralHist"].length > 1) {
              if (recordsList[i].attributes[firstImageName].length > 1 && recordsList[i].attributes["Narrator"].length > 1) {
                layer.source.add(recordsList[i]);
              }
            }
          }
        }//end mediaFilter

        //createPopup();

function createPopup(inputLayer) {
  //alert("create popup");

  var records = inputLayer.source.toArray();
    var recordsList = [];
    for (var i = 0, len = records.length; i < len; i++) {
      recordsList.push(records[i]);
    }

    var numberOfImages2;
    for (var i = 0; i < recordsList.length; i++) {

      var numberOfImages2 = 0;
      for (var j = 0; j < imageFields.length; j++) {
        var index2 = imageFields[j];
        var imageField2 = layer.fields[index2].name;
        if(recordsList[i].attributes[imageField2] && recordsList[i].attributes[imageField2].length > 1) {
          numberOfImages2++;
        }
      }
      recordsList[i].setAttribute("NoImg2", numberOfImages2);
      console.log(i + " " + recordsList[i].attributes["NoImg2"]);
    }

        //console.log(recordsList.length);
        for (var i = 0; i < recordsList.length; i++) {
         var popupContent = "<div style = 'display: inline-block; width:100%'>";
         //popupContent += recordsList[i].attributes["NoImg2"];
          //popupContent += "<div style = 'font-size:16px; width:auto; display: inline-block'><b>${Name}</b></div>";
          if  (recordsList[i].attributes["Narrator"] && recordsList[i].attributes["Narrator"].length > 1) {
            popupContent += "<div style = 'float:right; width:auto; display: inline-block'><img width = '20' src = 'http://www.clker.com/cliparts/6/g/n/Z/Y/V/head-outline-hi.png'></div></div>";
            popupContent += "<div style = 'float:right; width:auto; margin: 4px'><a href = '#'> Oral History: " + recordsList[i].attributes["Narrator"] + "</a></div>";
          }


         var totalNumberImages = recordsList[i].attributes["NoImg2"];
         //alert(totalNumberImages);
          //if there's only one image, just add it to the popup
          if (totalNumberImages == 1) {
            //alert(totalNumberImages);
            var singleImageIndex;
            for (j = 0; j < imageFields.length; j++) {
              var index2 = imageFields[j];
              var imageField2 = layer.fields[index2].name;
              if(recordsList[i].attributes[imageField2] && recordsList[i].attributes[imageField2].length > 1) {
                singleImageIndex = imageFields[j];
              }
            }
            //alert("single image index: " + singleImageIndex);
            //var firstImage = imageFields[singleImageIndex];
            var firstImageField = layer.fields[singleImageIndex].name;
            //popupContent += singleImageIndex;
            var firstDate = singleImageIndex + 1;
            var firstDateField = layer.fields[firstDate].name;
            //alert(firstDateField);
            var photoDate;
            if (recordsList[i].attributes[firstDateField] < 2999) {
              photoDate = recordsList[i].attributes[firstDateField];
            }
            if (recordsList[i].attributes[firstDateField] > 2999) {
              photoDate = "";
            }
            popupContent += "<div><a href='" + recordsList[i].attributes[firstImageField] +"' data-lightbox='shImages' data-title='Date: " + photoDate +"'><img width='200' src='" + recordsList[i].attributes[firstImageField] + "' style='position:relative'></a><span style = 'position:relative; left:50%; font-size:16px'><b>" + photoDate + "</b></span></div>";

          }
          //alert("firstimage");
          //if there's more than one image, put them in the format used by the Bootstrap Slideshow plugin
          if (totalNumberImages > 1) {
            //popupContent += "more than one";
            popupContent += "<div class='container' id='carouselContainer' style = 'width: 200px; margin:8px'>";
            popupContent += "<div id='myCarousel' class='carousel slide' data-ride='carousel' style = 'width: 200px; right:4%'>";
            popupContent += "<div class='carousel-inner' role='listbox'>";

            var firstImageIndex = 0;
            var len = imageFields.length;

            for (j = 0; j < imageFields.length; j++) {
              var index2 = imageFields[j];
              //popupContent += index2;
              var imageField2 = layer.fields[index2].name;
              //alert(imageField2);
              if(firstImageIndex == 0 && recordsList[i].attributes[imageField2] && recordsList[i].attributes[imageField2].length > 1) {
                firstImageIndex = imageFields[j];
                //popupContent += firstImageIndex;

              }
            }
            //alert(firstImageIndex);
            //popupContent+= firstImageIndex;
            /*var firstImageField = layer.fields[singleImageIndex].name;
            popupContent += singleImageIndex;
            var firstDate = singleImageIndex + 1;
            var firstDateField = layer.fields[firstDate].name;*/

            var firstImage = firstImageIndex;
            var firstImageField = layer.fields[firstImage].name;
            var firstDate = firstImageIndex + 1;
            var firstDateField = layer.fields[firstDate].name;
            var photoDate;
            if (recordsList[i].attributes[firstDateField] < 2999) {
              photoDate = recordsList[i].attributes[firstDateField];
            }
            if (recordsList[i].attributes[firstDateField] > 2999) {
              photoDate = "";
            }
            popupContent += "<div class='item active'><a href='" + recordsList[i].attributes[firstImageField] + "'data-lightbox='shImages'data-title='Date: " + photoDate +"'><img width='200' src='" + recordsList[i].attributes[firstImageField] + "'></a><span style = 'position:relative; left:50%; font-size:16px'><b>" + photoDate + "</b></span></div>";
            //popupContent += "firstImage " + firstImageIndex;
            var len = imageFields.length;
            //popupContent += len;

            for (k = firstImageIndex + 1; k < layer.fields.length; k++) {
            //  popupContent += "k " + k;
              if (isInArray(k, imageFields)) {
              var imageField = k;
              var field = layer.fields[imageField].name;
              //popupContent += field;
              //popupContent += "</br>";
              var image = recordsList[i].attributes[field];
            //  popupContent += image;
              if (image && image.length > 1) {
                var dateFieldIndex = imageField + 1;
                var dateField = layer.fields[dateFieldIndex].name;
                var photoDate;
                if (recordsList[i].attributes[dateField] < 2999) {
                  photoDate = recordsList[i].attributes[dateField];
                }
                if (recordsList[i].attributes[dateField] > 2999) {
                  photoDate = "";
                }
                popupContent += "<div class='item'><a href='" + image + "'data-lightbox='shImages' data-title='Date: " + photoDate +"'><img width='200' src='" + image + "'></a><span style = 'position:relative; left:50%; font-size:16px'><b>" + photoDate + "</b></span></div>";

}
              }

            }




            /*for (var j = 1; j < totalNumberImages; j++){
              var fieldindex = imageFields[j];
              var fieldname = layer.fields[fieldindex].name;
              var dateFieldIndex = fieldindex + 1;
              var dateField = layer.fields[dateFieldIndex].name;
              var photoDate;
              if (recordsList[i].attributes[dateField] < 2999) {
                photoDate = recordsList[i].attributes[dateField];
              }
              if (recordsList[i].attributes[dateField] > 2999) {
                photoDate = "";
              }
              popupContent += "<div class='item'><a href='" + recordsList[i].attributes[fieldname] + "'data-lightbox='shImages' data-title='Date: " + photoDate +"'><img width='200' src='" + recordsList[i].attributes[fieldname] + "'></a><span style = 'position:relative; left:50%; font-size:16px'><b>" + photoDate + "</b></span></div>";
            }*/
            popupContent += "</div>";
            popupContent += "<a class='left carousel-control' href='#myCarousel' role='button' data-slide='prev'>" +
            "<span class='glyphicon glyphicon-chevron-left' aria-hidden='true'></span>" +
            "<span class='sr-only'>Previous</span>" +
            "</a>" +
            "<a class='right carousel-control' href='#myCarousel' role='button' data-slide='next'>" +
            "<span class='glyphicon glyphicon-chevron-right' aria-hidden='true'></span>" +
            "<span class='sr-only'>Next</span>" +
            "</a>" +
            "</div>";
          }
            popupContent += "</div>";

          if (recordsList[i].attributes["Hist__Cert"] != " " || recordsList[i].attributes["Re_Use_Ful"].length > 1 || recordsList[i].attributes["Re_Use_Typ"].length > 1){
            popupContent += "<br/>";
            popupContent += "<div style = 'border-bottom: 1px solid white; font-size: 16px'> ADDITIONAL DATA </div>";
          }
          if (recordsList[i].attributes["Hist__Cert"] && recordsList[i].attributes["Hist__Cert"] == "Y") {
            popupContent += "<br/>";
            popupContent += "<b>Historic Certificate:</b> Yes";
          }
          if (recordsList[i].attributes["Hist__Cert"] && recordsList[i].attributes["Hist__Cert"] == "N") {
            popupContent += "<br/>";
            popupContent += "<b>Historic Certificate:</b> No";
          }
          if (recordsList[i].attributes["Re_Use_Ful"].length > 1) {
            popupContent += "<br/>";
            popupContent += "<b>Reuse:</b> " + recordsList[i].attributes["Re_Use_Ful"];
          }
          if (recordsList[i].attributes["Re_Use_Typ"].length > 1) {
            popupContent += "<br/>";
            popupContent += "<b>Reuse Type:</b> " + recordsList[i].attributes["Re_Use_Typ"];
          }
        //  alert("popup content about to be set");
          recordsList[i].setAttribute("PopupContent", popupContent);

          //console.log("content set");
          //console.log(recordsList[i].attributes["PopupContent"]);
        } //end for

    }

      //  popupTemplate = new PopupTemplate();
        //historicLayer.popupTemplate = popupTemplate;
      /*  layer.popupTemplate = popupTemplate;
        popupTemplate.title = "{Name}";
        popupTemplate.content = "test";*/
      //  popupTemplate.content = "{PopupContent}";
        //alert("template set");
//}


        //popupTemplate.content = "test";

      /*  layer.on("click", function(evt) {
          var recordsList[i] = evt.graphic;
          //alert(recordsList[i]);
        //  popupTemplate.title = recordsList[i].attributes["Name"];
          //popupTemplate.content = "test";
        });*/

        /*view.on("click", function(evt) {
          //open a popup when a recordsList[i] is clicked
          view.hitTest(evt).then(function(response) {
            var clickedList = [response.results[0].graphic];
            //alert(clickedList[0].attributes["Name"]);
          //  alert(evt.mapPoint);
          view.popup.close();
            view.popup = new Popup({
              title: clickedList[0].attributes["Name"],
              location: clickedList[0].geometry.centroid,
              content: ''
            });
            view.popup.open()
          }).then();

        }); //end view.on click*/
      }); // end view.then
    }); //end all


    </script>
  </head>
  <body class="claro">
    <div id = "pageTitle"> Preserving Society Hill </div>
    <div id = "biggestDiv">
    <div id="viewDiv"></div>
      <div id = "sidebar">
        <a id = "collapseButton" href = "#">
          <div id = "collapse">Hide
        </div>
      </a>
        <div id = "innerSidebar">
       <div id = "introduction">
          <div id = "introTitle" class = "sidebarTitle">
            Introduction
          </div>
          <div id = "introText" class = "sidebarText">
            This website displays historic photographs, oral histories and redevelopment information for properties in Philadelphia's Society Hill neighborhood.  Click on a parcel to view the associated media, or filter by reuse type or type of media.
          </div>
        </div>
        <div id = "layers">
          <div id = "layerTitle" class = "sidebarTitle">
            Layers
          </div>
          <div id = "layerChecklist" class = "sidebarText">
            <form action = ''>
              <div> <input type="checkbox" class="checkbox" value="allFirstParcelsGeoOh_shapefile_6643" checked> Historic parcels </div>
              <div> <input type="checkbox" class = "checkbox" value="Archive 26_shapefile_5898"> Modern footprints </div>
              <div><input type="checkbox" class = "checkbox" value="LUM1942tile_7129" checked> Historic basemap </div>
              <div><input type="checkbox" class = "checkbox" value="World_Street_Map_3596" checked> Modern basemap </div>
            </form>
          </div>
        </div>
      </div>

      </div>

      <div id = "geocoder" style = "position:relative; z-index:1000"></div>
     <div id = "buttonDiv">
        <input class="w3-button w3-large w3-round" style = "background-color: #d8e6cc" type="button"  id="showAll" value="Show all"/>
        <select id="field_select" style = "background-color: #d8e6cc; height:30px" class="w3-button w3-large w3-round selector"><option value="init">(filter by reuse)</option></select>
        <select id="media_select" style = "background-color: #d8e6cc; height:30px; width:130px" class="w3-button w3-large w3-round selector">
          <option value="init">(filter by media)</option>
          <option value = "photo">Photos</option>
          <option value = "oralhist">Oral Histories</option>
          <option value = "both">Photos and Oral Histories</option>
        </select>
        <select id="layer_select" style = "background-color: #d8e6cc; height:30px; width:130px" class="w3-button w3-large w3-round selector">
        <option value="historic">Historic parcels</option>
        <option value = "modern"> Modern footprints</option>
        <option value = "none">No layers</option>
      </select>

    <div id = "toggle">
    <div class="layerText">Historic parcels</div>
    <label class="switch" style = "vertical-align:middle">
    <input type="checkbox">
    <span id = "toggleLayers" class="slider">
  </span>
</label>
<div class="layerText" >Modern building footprints</div>
</div>
</div>



<!--  </div>-->
      <script src="lightbox/js/lightbox-plus-jquery.js"></script>
    </body>
<script>
</script>
</html>
